{"title":"What's new in {gt} tables?","markdown":{"yaml":{"title":"What's new in {gt} tables?","subtitle":"A look at some new features in the {gt} package.","date":"2024-01-25","categories":["gt","tables","news"],"description":"In this post we will explore some of my favorite new (and some old) features in {gt} tables","execute":{"message":false,"warning":false},"editor_options":{"chunk_output_type":"console"},"format":{"html":{"code-fold":true,"code-summary":"Show the code"}}},"headingText":"Create a filter function","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(janitor)\nlibrary(timetk)\nlibrary(TTR)\nlibrary(quantmod)\n\ngetSymbols(\n  '^GSPC',\n  start = 20200101,\n  end   = 20240101,\n  freq  = 'monthly')\n\nGSPC <- GSPC |> \n  fortify() |> \n  tibble() |> \n  rename(date = Index) |> \n  clean_names()\n\nmy_filter_fn <- function(data, filter_year, by = \"month\") {\n  data |> \n    filter(year(date) == filter_year) |>\n    summarise_by_time(.date_var   = date,\n                      .by         = by,\n                      close       = last(gspc_adjusted)) |> \n    mutate(month_year = month(date, label = TRUE, abbr = TRUE))\n}\n\n# Get 2016 - 2020\nGSPC_2016 <- GSPC |>\n  my_filter_fn(filter_year = 2016)\n\nGSPC_2017 <- GSPC |>\n  my_filter_fn(filter_year = 2017)\n\nGSPC_2018 <- GSPC |>\n  my_filter_fn(filter_year = 2018)\n\nGSPC_2019 <- GSPC |>\n  my_filter_fn(filter_year = 2019)\n\n\n# Get only 2020\nGSPC_2020 <- GSPC |>\n  my_filter_fn(filter_year = 2020)\n\n# Get only 2021\nGSPC_2021 <- GSPC |> \n  my_filter_fn(filter_year = 2021)\n\n# Get only 2022\nGSPC_2022 <- GSPC |> \n  my_filter_fn(filter_year = 2022)\n\n# Get only 2023\nGSPC_2023 <- GSPC |> \n  my_filter_fn(filter_year = 2023)\n\nspread_data_fn <- function(data) {\n  data |>\n    mutate(date = as.Date(date), year = lubridate::year(date)) %>%\n    select(-date) %>%\n    spread(key = month_year, value = close) |> \n    rename_with(~ paste0(\"close_\", .), -year)\n}\n\nGSPC_2016 <- GSPC_2016 |> \n  spread_data_fn() \n\nGSPC_2017 <- GSPC_2017 |> \n  spread_data_fn()\n\nGSPC_2018 <- GSPC_2018 |> \n  spread_data_fn()\n\nGSPC_2019 <- GSPC_2019 |> \n  spread_data_fn()\n\nGSPC_2020 <- GSPC_2020 |> \n  spread_data_fn()\n\nGSPC_2021 <- GSPC_2021 |> \n  spread_data_fn()\n\nGSPC_2022 <- GSPC_2022 |> \n  spread_data_fn()\n\nGSPC_2023 <- GSPC_2023 |> \n  spread_data_fn()\n\n# Bind rows\nGSPC_2016_2023 <- bind_rows(\n  GSPC_2016, GSPC_2017, GSPC_2018, GSPC_2019,\n  GSPC_2020, GSPC_2021, GSPC_2022, GSPC_2023\n)\n\ntowny_tbl <- gt::towny |> \n  dplyr::select(\n    name, latitude, longitude,\n    land_area  = land_area_km2,\n    population = population_2021,\n    density    = density_2021\n  )\n```\n\n## What is {`gt`} tables?\n\n![](feature.jpeg)\n\nAs we delve into the latest enhancements of the `gt` package in R, let's take a moment to appreciate what `gt` tables is and why it has become an indispensable tool for data scientists and analysts.\n\n> `gt`, short for Great Tables, is a powerful R package designed to create rich, customizable tables. It stands out in the R ecosystem for its ability to elegantly handle the presentation aspect of data analysis. With `gt`, users can transform basic data frames into professionally styled tables that are not only informative but also visually compelling.\n\nThis package excels in its flexibility and ease of use, allowing for detailed adjustments to table formatting, style, and layout. It supports a variety of functionalities such as merging cells, adding footnotes, integrating conditional formatting, and much more, making it a versatile choice for a wide range of applications.\n\nAs we explore the new features of `gt`, we will see how it continues to evolve, further enhancing its capabilities to meet the growing demands of data visualization and reporting in the R community.\n\n## Nanoplots, interactive plots in your **`gt`** table\n\nNanoplots are compact, interactive visualizations designed for inclusion in `gt` tables. Their main features include:\n\n-   **Compactness**: Designed to be simple and space-efficient, suitable for embedding in tables.\n\n-   **Basic Interactivity**: Users can interact with the plots, like hovering over data points to see values. \n\n-   **Variety of Plot Types**: Supports different plot styles such as line, bar, and boxplot.\n\n-   **Customizability**: Offers options for customization, including formatting and labeling.\n\nThe `cols_nanoplot`() function in `gt` is used to create nanoplots. It allows the selection of specific columns for data, which are then represented in the chosen plot style. These plots can display data compactly and interactively, making them a useful tool for enhancing the presentation of data within tables.\n\n### Line plots\n\nBelow is an example of a nanoplot (`plot_style = \"line\"`) in a `gt` table. The plot shows the monthly close price of the S&P 500 from 2016 to 2023.\n\n::: {.callout-tip collapse=false}\n## Hover to reveal data points!\n\nYou can hover over the nanoplots below to see the values of the data points. If you hover over the left-most plot of the chart area you can also see the range of values in the plot.\n:::\n\n```{r}\npizzaplace |>\n  dplyr::select(type, date) |>\n  dplyr::group_by(date, type) |>\n  dplyr::summarize(sold = dplyr::n(), .groups = \"drop\") |>\n  tidyr::pivot_wider(names_from = type, values_from = sold) |>\n  dplyr::slice_head(n = 10) |>\n  gt(rowname_col = \"date\") |>\n  tab_header(\n    title = md(\"First Ten Days of Pizza Sales in 2015\")\n  ) |>\n  cols_nanoplot(\n    columns = c(chicken, classic, supreme, veggie),\n    plot_type = \"bar\",\n    autohide = FALSE,\n    new_col_name = \"pizzas_sold\",\n    new_col_label = \"Sales by Type\",\n    options = nanoplot_options(\n      show_data_line = FALSE,\n      show_data_area = FALSE,\n      data_bar_stroke_color = \"transparent\",\n      data_bar_fill_color = c(\"brown\", \"gold\", \"purple\", \"green\")\n    )\n  ) |>\n  cols_width(pizzas_sold ~ px(150)) |>\n  cols_align(columns = -date, align = \"center\") |>\n  fmt_date(columns = date, date_style = \"yMMMEd\") |>\n  opt_all_caps()\n```\n\n\n```{r}\nGSPC_2016_2023 |>\n  rename_with(~ str_remove(., \"close_\"), starts_with(\"close_\")) |>\n  arrange(-year) |>\n  gt(rowname_col = \"year\") |>\n  tab_header(\n    title    = md(\"**SP500** performance by month, 2016 - 2024\"),\n    subtitle = \"Monthly Close Price from Yahoo Finance\"\n    ) |>\n  tab_stubhead(label = md(\"**Year**\")) |>\n  cols_nanoplot(\n    columns       = everything(),\n    new_col_name  = \"nanoplots\",\n    autohide = FALSE,\n    new_col_label = md(\"*Monthly Close Price*\"),\n    options = nanoplot_options(\n      data_line_stroke_color = \"#E91E63\",\n      data_area_fill_color   = \"#E91E63\",\n      data_point_fill_color  = \"#E91E63\"\n      )\n  ) |>\n  cols_align(align = \"center\", columns = nanoplots) |>\n  tab_footnote(\n    footnote = \"Source: Yahoo Finance\",\n    locations = cells_column_labels(columns = nanoplots)\n  ) |> \n  opt_align_table_header(align = \"left\") |>\n  tab_options(heading.padding = px(3),\n              table.font.size = \"12px\") |> \n  tab_source_note(source_note = md(\n    \"Data is sourced from `Yahoo Finance` using the **quantmod** package.\"\n  )) |> \n  tab_options(table.width = pct(50))\n```\n\n### Boxplots\n\nAmong these, the \"boxplot\" nano plot is particularly useful for summarizing data distributions directly within a table cell. This feature enhances the ability to visualize and compare distributions across different groups or categories, providing a more intuitive and immediate understanding of the data. For more details, you can visit the Posit blog.\n\n::: {.callout-tip collapse=false}\n## Hover to reveal data points!\n\nYou can hover over the boxplots below to see the values of the data points.\n:::\n\n```{r}\nbind_cols(\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(bill_length_mm = paste(bill_length_mm, collapse = \",\"), .by = species),\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(bill_depth_mm = paste(bill_depth_mm, collapse = \",\"), .by = species) |> \n    select(-species),\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(flipper_length_mm = paste(flipper_length_mm, collapse = \",\"), .by = species) |> \n    select(-species),\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(body_mass_g = paste(body_mass_g, collapse = \",\"), .by = species) |> \n    select(-species)\n  ) |> \n  rename(Species = species) |> \n  gt() |> \n  cols_nanoplot(\n    columns   = bill_length_mm,\n    plot_type = \"boxplot\",\n    new_col_name = \"Bill Length (mm)\",\n    new_col_label = \"Bill Length (mm)\"\n  ) |> \n  cols_nanoplot(\n    columns   = bill_depth_mm,\n    plot_type = \"boxplot\",\n    new_col_name = \"Bill Depth (mm)\",\n    new_col_label = \"Bill Depth (mm)\"\n  ) |> \n  cols_nanoplot(\n    columns   = flipper_length_mm,\n    plot_type = \"boxplot\",\n    new_col_name = \"Flipper Length (mm)\",\n    new_col_label = \"Flipper Length (mm)\"\n  ) |> \n  cols_nanoplot(\n    columns   = body_mass_g,\n    plot_type = \"boxplot\",\n    new_col_name = \"Body Mass (mm)\",\n    new_col_label = \"Body Mass (mm)\"\n  ) |> \n  tab_header(\n    title = md(\"**Comparative Anatomy of Penguin Species**\"),\n    subtitle = \"Boxplot Analysis of Bill, Flipper, and Body Measurements\"\n  ) |>\n  opt_align_table_header(align = \"left\") |>\n  tab_options(heading.padding = px(5),\n              data_row.padding = px(12),\n              row.striping.background_color = \"white\") |> \n  tab_source_note(source_note = md(\n    \"Data taken from the `penguins` dataset in the **palmerspenguins** package.\"\n  ))\n```\n\n\n## Interactivity (...with style)\n\nAnother significant new feature is the introduction of interactive HTML tables. This advancement transforms the way tables are created and interacted with in R, offering a more dynamic and engaging user experience. With this update, `gt` tables become not just a means of displaying data, but an interactive tool for data exploration and presentation. This enhancement aligns with the ongoing evolution of `gt` as a comprehensive solution for data visualization in R, catering to the growing demands for interactivity in data presentation.\n\n```{r}\ntowny_tbl_styled <-\n  towny_tbl |>\n  dplyr::arrange(desc(population)) |>\n  gt() |>\n  fmt_number(decimals = 1) |>\n  fmt_integer(population) |>\n  cols_label_with(\n    fn = ~ janitor::make_clean_names(., case = \"title\")\n  ) |>\n  data_color(\n    columns = density,\n    palette = \"Blues\"\n  ) |>\n  data_color(\n    columns = population,\n    palette = \"Reds\"\n  ) |>\n  tab_style(\n    style = cell_fill(color = \"gray98\"),\n    locations = cells_body(columns = c(latitude, longitude))\n  ) |>\n  tab_style(\n    locations = cells_body(columns = name),\n    style = cell_text(weight = \"bold\")\n  ) |>\n  opt_interactive(\n    use_filters = TRUE,\n    use_compact_mode = TRUE,\n    use_text_wrapping = FALSE\n  )\n\n## Adding a header and footer\ntowny_tbl_header <-\n  towny_tbl_styled |>\n  tab_header(\n    title = md(\"**Population** and **Density** Data\"),\n    subtitle = \"Arranged from largest to smallest municipality\"\n  ) |>\n  opt_align_table_header(align = \"left\") |>\n  tab_options(heading.padding = px(1))\n\ntowny_tbl_header |>\n  tab_source_note(source_note = md(\n    \"Data taken from the `towny` dataset in the **gt** package.\"\n  )) |>\n  tab_footnote(\n    footnote = \"Density here is the population divided by\n    the land area.\",\n    locations = cells_column_labels(columns = density)\n  ) |>\n  tab_footnote(\n    footnote = \"Population values obtained from the 2021 census.\",\n    locations = cells_column_labels(columns = population)\n  ) |>\n  opt_footnote_marks(marks = c(\"†\", \"‡\")) |>\n  opt_footnote_spec(spec_ref = \"i\", spec_ftr = \"i\")\n```\n\n\n\n## Closing thoughts\n\nAs we've explored some of the intriguing new features in the `gt` package, it's clear that `gt` tables are evolving into an even more powerful tool for data visualization and presentation. With innovations like nanoplots adding a new dimension of interactivity and visual appeal to our tables, the possibilities for data representation are expanding. The practicality of `gt` tables, combined with their increasing flexibility and style, makes them an essential part of any data scientist's toolkit.\n\nAs this journey through the `gt` package's latest offerings comes to a close, remember that this is just the tip of the iceberg. Stay tuned for future posts where we'll dive deeper into the `gt` tables' feature set, uncovering more ways to bring data to life. Whether you're a seasoned data analyst or just starting out, the evolving landscape of `gt` tables promises to offer something new and exciting for everyone. Let's continue to explore and innovate together in the world of data visualization!\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(janitor)\nlibrary(timetk)\nlibrary(TTR)\nlibrary(quantmod)\n\ngetSymbols(\n  '^GSPC',\n  start = 20200101,\n  end   = 20240101,\n  freq  = 'monthly')\n\nGSPC <- GSPC |> \n  fortify() |> \n  tibble() |> \n  rename(date = Index) |> \n  clean_names()\n\n# Create a filter function\nmy_filter_fn <- function(data, filter_year, by = \"month\") {\n  data |> \n    filter(year(date) == filter_year) |>\n    summarise_by_time(.date_var   = date,\n                      .by         = by,\n                      close       = last(gspc_adjusted)) |> \n    mutate(month_year = month(date, label = TRUE, abbr = TRUE))\n}\n\n# Get 2016 - 2020\nGSPC_2016 <- GSPC |>\n  my_filter_fn(filter_year = 2016)\n\nGSPC_2017 <- GSPC |>\n  my_filter_fn(filter_year = 2017)\n\nGSPC_2018 <- GSPC |>\n  my_filter_fn(filter_year = 2018)\n\nGSPC_2019 <- GSPC |>\n  my_filter_fn(filter_year = 2019)\n\n\n# Get only 2020\nGSPC_2020 <- GSPC |>\n  my_filter_fn(filter_year = 2020)\n\n# Get only 2021\nGSPC_2021 <- GSPC |> \n  my_filter_fn(filter_year = 2021)\n\n# Get only 2022\nGSPC_2022 <- GSPC |> \n  my_filter_fn(filter_year = 2022)\n\n# Get only 2023\nGSPC_2023 <- GSPC |> \n  my_filter_fn(filter_year = 2023)\n\nspread_data_fn <- function(data) {\n  data |>\n    mutate(date = as.Date(date), year = lubridate::year(date)) %>%\n    select(-date) %>%\n    spread(key = month_year, value = close) |> \n    rename_with(~ paste0(\"close_\", .), -year)\n}\n\nGSPC_2016 <- GSPC_2016 |> \n  spread_data_fn() \n\nGSPC_2017 <- GSPC_2017 |> \n  spread_data_fn()\n\nGSPC_2018 <- GSPC_2018 |> \n  spread_data_fn()\n\nGSPC_2019 <- GSPC_2019 |> \n  spread_data_fn()\n\nGSPC_2020 <- GSPC_2020 |> \n  spread_data_fn()\n\nGSPC_2021 <- GSPC_2021 |> \n  spread_data_fn()\n\nGSPC_2022 <- GSPC_2022 |> \n  spread_data_fn()\n\nGSPC_2023 <- GSPC_2023 |> \n  spread_data_fn()\n\n# Bind rows\nGSPC_2016_2023 <- bind_rows(\n  GSPC_2016, GSPC_2017, GSPC_2018, GSPC_2019,\n  GSPC_2020, GSPC_2021, GSPC_2022, GSPC_2023\n)\n\ntowny_tbl <- gt::towny |> \n  dplyr::select(\n    name, latitude, longitude,\n    land_area  = land_area_km2,\n    population = population_2021,\n    density    = density_2021\n  )\n```\n\n## What is {`gt`} tables?\n\n![](feature.jpeg)\n\nAs we delve into the latest enhancements of the `gt` package in R, let's take a moment to appreciate what `gt` tables is and why it has become an indispensable tool for data scientists and analysts.\n\n> `gt`, short for Great Tables, is a powerful R package designed to create rich, customizable tables. It stands out in the R ecosystem for its ability to elegantly handle the presentation aspect of data analysis. With `gt`, users can transform basic data frames into professionally styled tables that are not only informative but also visually compelling.\n\nThis package excels in its flexibility and ease of use, allowing for detailed adjustments to table formatting, style, and layout. It supports a variety of functionalities such as merging cells, adding footnotes, integrating conditional formatting, and much more, making it a versatile choice for a wide range of applications.\n\nAs we explore the new features of `gt`, we will see how it continues to evolve, further enhancing its capabilities to meet the growing demands of data visualization and reporting in the R community.\n\n## Nanoplots, interactive plots in your **`gt`** table\n\nNanoplots are compact, interactive visualizations designed for inclusion in `gt` tables. Their main features include:\n\n-   **Compactness**: Designed to be simple and space-efficient, suitable for embedding in tables.\n\n-   **Basic Interactivity**: Users can interact with the plots, like hovering over data points to see values. \n\n-   **Variety of Plot Types**: Supports different plot styles such as line, bar, and boxplot.\n\n-   **Customizability**: Offers options for customization, including formatting and labeling.\n\nThe `cols_nanoplot`() function in `gt` is used to create nanoplots. It allows the selection of specific columns for data, which are then represented in the chosen plot style. These plots can display data compactly and interactively, making them a useful tool for enhancing the presentation of data within tables.\n\n### Line plots\n\nBelow is an example of a nanoplot (`plot_style = \"line\"`) in a `gt` table. The plot shows the monthly close price of the S&P 500 from 2016 to 2023.\n\n::: {.callout-tip collapse=false}\n## Hover to reveal data points!\n\nYou can hover over the nanoplots below to see the values of the data points. If you hover over the left-most plot of the chart area you can also see the range of values in the plot.\n:::\n\n```{r}\npizzaplace |>\n  dplyr::select(type, date) |>\n  dplyr::group_by(date, type) |>\n  dplyr::summarize(sold = dplyr::n(), .groups = \"drop\") |>\n  tidyr::pivot_wider(names_from = type, values_from = sold) |>\n  dplyr::slice_head(n = 10) |>\n  gt(rowname_col = \"date\") |>\n  tab_header(\n    title = md(\"First Ten Days of Pizza Sales in 2015\")\n  ) |>\n  cols_nanoplot(\n    columns = c(chicken, classic, supreme, veggie),\n    plot_type = \"bar\",\n    autohide = FALSE,\n    new_col_name = \"pizzas_sold\",\n    new_col_label = \"Sales by Type\",\n    options = nanoplot_options(\n      show_data_line = FALSE,\n      show_data_area = FALSE,\n      data_bar_stroke_color = \"transparent\",\n      data_bar_fill_color = c(\"brown\", \"gold\", \"purple\", \"green\")\n    )\n  ) |>\n  cols_width(pizzas_sold ~ px(150)) |>\n  cols_align(columns = -date, align = \"center\") |>\n  fmt_date(columns = date, date_style = \"yMMMEd\") |>\n  opt_all_caps()\n```\n\n\n```{r}\nGSPC_2016_2023 |>\n  rename_with(~ str_remove(., \"close_\"), starts_with(\"close_\")) |>\n  arrange(-year) |>\n  gt(rowname_col = \"year\") |>\n  tab_header(\n    title    = md(\"**SP500** performance by month, 2016 - 2024\"),\n    subtitle = \"Monthly Close Price from Yahoo Finance\"\n    ) |>\n  tab_stubhead(label = md(\"**Year**\")) |>\n  cols_nanoplot(\n    columns       = everything(),\n    new_col_name  = \"nanoplots\",\n    autohide = FALSE,\n    new_col_label = md(\"*Monthly Close Price*\"),\n    options = nanoplot_options(\n      data_line_stroke_color = \"#E91E63\",\n      data_area_fill_color   = \"#E91E63\",\n      data_point_fill_color  = \"#E91E63\"\n      )\n  ) |>\n  cols_align(align = \"center\", columns = nanoplots) |>\n  tab_footnote(\n    footnote = \"Source: Yahoo Finance\",\n    locations = cells_column_labels(columns = nanoplots)\n  ) |> \n  opt_align_table_header(align = \"left\") |>\n  tab_options(heading.padding = px(3),\n              table.font.size = \"12px\") |> \n  tab_source_note(source_note = md(\n    \"Data is sourced from `Yahoo Finance` using the **quantmod** package.\"\n  )) |> \n  tab_options(table.width = pct(50))\n```\n\n### Boxplots\n\nAmong these, the \"boxplot\" nano plot is particularly useful for summarizing data distributions directly within a table cell. This feature enhances the ability to visualize and compare distributions across different groups or categories, providing a more intuitive and immediate understanding of the data. For more details, you can visit the Posit blog.\n\n::: {.callout-tip collapse=false}\n## Hover to reveal data points!\n\nYou can hover over the boxplots below to see the values of the data points.\n:::\n\n```{r}\nbind_cols(\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(bill_length_mm = paste(bill_length_mm, collapse = \",\"), .by = species),\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(bill_depth_mm = paste(bill_depth_mm, collapse = \",\"), .by = species) |> \n    select(-species),\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(flipper_length_mm = paste(flipper_length_mm, collapse = \",\"), .by = species) |> \n    select(-species),\n  palmerpenguins::penguins |> \n  drop_na() |>\n  summarize(body_mass_g = paste(body_mass_g, collapse = \",\"), .by = species) |> \n    select(-species)\n  ) |> \n  rename(Species = species) |> \n  gt() |> \n  cols_nanoplot(\n    columns   = bill_length_mm,\n    plot_type = \"boxplot\",\n    new_col_name = \"Bill Length (mm)\",\n    new_col_label = \"Bill Length (mm)\"\n  ) |> \n  cols_nanoplot(\n    columns   = bill_depth_mm,\n    plot_type = \"boxplot\",\n    new_col_name = \"Bill Depth (mm)\",\n    new_col_label = \"Bill Depth (mm)\"\n  ) |> \n  cols_nanoplot(\n    columns   = flipper_length_mm,\n    plot_type = \"boxplot\",\n    new_col_name = \"Flipper Length (mm)\",\n    new_col_label = \"Flipper Length (mm)\"\n  ) |> \n  cols_nanoplot(\n    columns   = body_mass_g,\n    plot_type = \"boxplot\",\n    new_col_name = \"Body Mass (mm)\",\n    new_col_label = \"Body Mass (mm)\"\n  ) |> \n  tab_header(\n    title = md(\"**Comparative Anatomy of Penguin Species**\"),\n    subtitle = \"Boxplot Analysis of Bill, Flipper, and Body Measurements\"\n  ) |>\n  opt_align_table_header(align = \"left\") |>\n  tab_options(heading.padding = px(5),\n              data_row.padding = px(12),\n              row.striping.background_color = \"white\") |> \n  tab_source_note(source_note = md(\n    \"Data taken from the `penguins` dataset in the **palmerspenguins** package.\"\n  ))\n```\n\n\n## Interactivity (...with style)\n\nAnother significant new feature is the introduction of interactive HTML tables. This advancement transforms the way tables are created and interacted with in R, offering a more dynamic and engaging user experience. With this update, `gt` tables become not just a means of displaying data, but an interactive tool for data exploration and presentation. This enhancement aligns with the ongoing evolution of `gt` as a comprehensive solution for data visualization in R, catering to the growing demands for interactivity in data presentation.\n\n```{r}\ntowny_tbl_styled <-\n  towny_tbl |>\n  dplyr::arrange(desc(population)) |>\n  gt() |>\n  fmt_number(decimals = 1) |>\n  fmt_integer(population) |>\n  cols_label_with(\n    fn = ~ janitor::make_clean_names(., case = \"title\")\n  ) |>\n  data_color(\n    columns = density,\n    palette = \"Blues\"\n  ) |>\n  data_color(\n    columns = population,\n    palette = \"Reds\"\n  ) |>\n  tab_style(\n    style = cell_fill(color = \"gray98\"),\n    locations = cells_body(columns = c(latitude, longitude))\n  ) |>\n  tab_style(\n    locations = cells_body(columns = name),\n    style = cell_text(weight = \"bold\")\n  ) |>\n  opt_interactive(\n    use_filters = TRUE,\n    use_compact_mode = TRUE,\n    use_text_wrapping = FALSE\n  )\n\n## Adding a header and footer\ntowny_tbl_header <-\n  towny_tbl_styled |>\n  tab_header(\n    title = md(\"**Population** and **Density** Data\"),\n    subtitle = \"Arranged from largest to smallest municipality\"\n  ) |>\n  opt_align_table_header(align = \"left\") |>\n  tab_options(heading.padding = px(1))\n\ntowny_tbl_header |>\n  tab_source_note(source_note = md(\n    \"Data taken from the `towny` dataset in the **gt** package.\"\n  )) |>\n  tab_footnote(\n    footnote = \"Density here is the population divided by\n    the land area.\",\n    locations = cells_column_labels(columns = density)\n  ) |>\n  tab_footnote(\n    footnote = \"Population values obtained from the 2021 census.\",\n    locations = cells_column_labels(columns = population)\n  ) |>\n  opt_footnote_marks(marks = c(\"†\", \"‡\")) |>\n  opt_footnote_spec(spec_ref = \"i\", spec_ftr = \"i\")\n```\n\n\n\n## Closing thoughts\n\nAs we've explored some of the intriguing new features in the `gt` package, it's clear that `gt` tables are evolving into an even more powerful tool for data visualization and presentation. With innovations like nanoplots adding a new dimension of interactivity and visual appeal to our tables, the possibilities for data representation are expanding. The practicality of `gt` tables, combined with their increasing flexibility and style, makes them an essential part of any data scientist's toolkit.\n\nAs this journey through the `gt` package's latest offerings comes to a close, remember that this is just the tip of the iceberg. Stay tuned for future posts where we'll dive deeper into the `gt` tables' feature set, uncovering more ways to bring data to life. Whether you're a seasoned data analyst or just starting out, the evolving landscape of `gt` tables promises to offer something new and exciting for everyone. Let's continue to explore and innovate together in the world of data visualization!\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"include-after-body":["../../../footer.html"],"output-file":"01-gt-tables.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.528","editor":"source","theme":["flatly","../../../theme.scss"],"title-block-banner":true,"author":"Alex Labuda","page-layout":"article","comments":{"utterances":{"repo":"alexlabuda/blogComments"}},"title":"What's new in {gt} tables?","subtitle":"A look at some new features in the {gt} package.","date":"2024-01-25","categories":["gt","tables","news"],"description":"In this post we will explore some of my favorite new (and some old) features in {gt} tables","editor_options":{"chunk_output_type":"console"},"code-summary":"Show the code"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}