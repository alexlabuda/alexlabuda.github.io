{
  "hash": "7020b6d541ce84142c41c045d8d712e7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Haunted Places in New York\"\nsubtitle: \"Creating a map styled map showing all the haunted places in New York City\"\ndate: '2024-01-25'\ncategories: ['gt', 'tables', 'news']\ndescription: \"Something here about haunted places\"\nexecute: \n  message: false\n  warning: false\neditor_options: \n  chunk_output_type: console\nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(showtext)\nlibrary(patchwork)\nlibrary(camcorder)\nlibrary(ggtext)\nlibrary(glue)\nlibrary(osmdata)\nlibrary(sf)\nlibrary(ggfx)\n\ntheme_set(theme_minimal())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntuesdata <- tidytuesdayR::tt_load(\"2023-10-10\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tDownloading file 1 of 1: `haunted_places.csv`\n```\n\n\n:::\n\n```{.r .cell-code}\nhaunted_places <- tuesdata$haunted_places\n\n# Load Fonts \nfont_add_google(\"Roboto\", \"roboto\")\nfont_add_google(\"Ubuntu\", \"ubuntu\")\nshowtext_auto()\n\n# Define colours ----------------------------------------------------------\n\nbg_col        <- \"grey10\"\ntext_col      <- \"grey90\"\nhighlight_col <- \"#880808\"\n\nbody_font  <- \"ubuntu\"\ntitle_font <- \"roboto\"\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_data <- haunted_places |>\n  filter(state == \"New York\") |>\n  drop_na() |>\n  select(-c(starts_with(\"city_\"), city, country, state, state_abbrev))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbb <- getbb(\"New York\")\nstreets <- bb |>\n  opq() |>\n  add_osm_feature(\n    key = \"highway\",\n    value = c(\n      \"motorway\", \"primary\",\n      \"secondary\", \"tertiary\"\n    )\n  ) |>\n  osmdata_sf()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsmall_streets <- bb |>\n  opq() |>\n  add_osm_feature(\n    key = \"highway\",\n    value = c(\n      \"residential\", \"living_street\",\n      \"unclassified\",\n      \"service\", \"footway\"\n    )\n  ) |>\n  osmdata_sf()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# convert to sf object\nplot_sf <- plot_data |>\n  filter(longitude >= bb[\"x\", \"min\"] & longitude <= bb[\"x\", \"max\"]) |>\n  filter(latitude >= bb[\"y\", \"min\"] & latitude <= bb[\"y\", \"max\"]) |>\n  st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = 4326)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define text -------------------------------------------------------------\n\n# social <- nrBrand::social_caption(\n#   bg_colour = bg_col,\n#   icon_colour = highlight_col,\n#   font_colour = highlight_col,\n#   font_family = body_font\n# )\ntitle <- \"New York\"\nst <- \"New York is one of the most haunted cities in the United States, with over 400 entries listed for haunted places in the Shadowlands Haunted Places Index.<br>\n**Data**: The Shadowlands Haunted Places Index | OpenStreetMap\"\ncap <- glue(\n  \"\"\n)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(\n    data = small_streets$osm_lines,\n    color = \"#630606\",\n    size = 0.1,\n    alpha = 0.4\n  ) +\n  geom_sf(\n    data = streets$osm_lines,\n    color = highlight_col,\n    size = 0.4,\n    alpha = 0.7\n  ) +\n  with_outer_glow(\n    geom_sf(\n      data   = plot_sf,\n      colour = text_col,\n      size   = 0.5,\n    ),\n    colour = \"white\",\n    sigma = 10,\n    expand = 9\n  ) +\n  labs(\n    title    = title,\n    subtitle = st,\n    caption  = cap\n  ) +\n  theme_void(base_size = 30, base_family = body_font) +\n  theme(\n    plot.background  = element_rect(fill = bg_col, colour = bg_col),\n    panel.background = element_rect(fill = bg_col, colour = bg_col),\n    plot.margin = margin(10, 10, 10, 10),\n    plot.title = element_textbox_simple(\n      colour     = highlight_col,\n      hjust      = 0.5,\n      halign     = 0.5,\n      face       = \"bold\",\n      size       = 100,\n      margin     = margin(b = 10, t = 10),\n      lineheight = 0.5,\n      family     = title_font\n    ),\n    plot.subtitle = element_textbox_simple(\n      colour = text_col,\n      hjust = 0.5,\n      halign = 0.5,\n      margin = margin(b = 10, t = 10),\n      lineheight = 0.5,\n      family = body_font\n    ),\n    plot.caption = element_textbox_simple(\n      colour = text_col,\n      hjust = 0.5,\n      halign = 0.5,\n      margin = margin(b = 10, t = 10),\n      lineheight = 0.5,\n      family = body_font\n    )\n  )\n```\n\n::: {.cell-output-display}\n![Haunted Places in New York](haunted-places-ny_files/figure-html/unnamed-chunk-8-1.png){fig-align='center' width=100%}\n:::\n:::\n",
    "supporting": [
      "haunted-places-ny_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}